<div class="dashboard-container p-3">
  <!-- SIDEBAR FILTER SECTION -->
  <aside class="filter-sidebar">
    <h2>Filters</h2>
    <div class="p-fluid">
      <!-- Date Range -->
      <div class="field">
        <label for="startDate">Start Date</label>
        <p-datePicker
          id="startDate"
          [(ngModel)]="filter.startDate"
          dateFormat="yy-mm-dd"
          placeholder="Start Date"
        >
        </p-datePicker>
      </div>
      <div class="field">
        <label for="endDate">End Date</label>
        <p-datePicker
          id="endDate"
          [(ngModel)]="filter.endDate"
          dateFormat="yy-mm-dd"
          placeholder="End Date"
        >
        </p-datePicker>
      </div>

      <!-- Brand Select -->
      <div class="field" *ngIf="filterBrands.length > 0">
        <label for="brand">Select Brand</label>
        <p-select
          id="brand"
          [options]="filterBrands"
          placeholder="Select Brand"
          [(ngModel)]="filter.brandName"
        >
        </p-select>
      </div>

      <!-- Platform Select -->
      <div class="field">
        <label for="platform">Select Platform</label>
        <p-select
          id="platform"
          [options]="platforms"
          placeholder="Select Platform"
          [(ngModel)]="filter.platform"
        >
        </p-select>
      </div>

      <!-- Grouping Options -->
      <div class="field-checkbox mt-2">
        <p-checkbox
          inputId="groupByBrand"
          [(ngModel)]="filter.groupByBrand"
          binary="true"
        >
        </p-checkbox>
        <label for="groupByBrand">Group by Brand</label>
      </div>
      <div class="field-checkbox">
        <p-checkbox
          inputId="groupByPlatform"
          [(ngModel)]="filter.groupByPlatform"
          binary="true"
        >
        </p-checkbox>
        <label for="groupByPlatform">Group by Platform</label>
      </div>

      <!-- Date Grouping Radios -->
      <div class="group-by-date mt-3">
        <label>Group by Date:</label>
        <div class="field-radiobutton">
          <p-radioButton
            name="groupByDate"
            inputId="none"
            value=""
            [(ngModel)]="filter.groupByDate"
          >
          </p-radioButton>
          <label for="none">None</label>
        </div>
        <div class="field-radiobutton compact-radio-group" *ngFor="let opt of dateGroupOptions">
          <p-radioButton
            [name]="'groupByDate'"
            [inputId]="opt"
            [value]="opt"
            [(ngModel)]="filter.groupByDate"
          >
          </p-radioButton>
          <label [for]="opt">{{ opt | titlecase }}</label>
        </div>
      </div>

      <!-- Apply Button -->
      <div class="mt-3">
        <button
          pButton
          label="Apply Filters"
          (click)="loadEnhancedDashboardData()"
        ></button>

        <!-- Reset Filters Button -->
        <button
          pButton
          label="Reset Filters"
          (click)="resetFilters()"
          class="reset-button"
        ></button>
      </div>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="dashboard-main">
    <!-- OVERALL METRICS SECTION -->
    <section class="metrics-section mb-3" *ngIf="summary">
      <p-card header="Overall Metrics" class="metrics-card">
        <div
          class="p-grid p-nogutter p-dir-col p-dir-md-row p-justify-center p-align-center"
        >
          <!-- TOTAL VIEWS -->
          <div class="metrics-item" *ngIf="summary.totalViews !== null">
            <div class="metrics-content">
              <div class="metrics-main">
                <div class="metrics-icon">
                  <i class="fa-solid fa-eye"></i>
                </div>
                <div class="metrics-value">
                  {{ summary.totalViews | shortNumber }}
                </div>
              </div>
              <div class="metrics-label">Total Views</div>
            </div>
          </div>

          <!-- TOTAL LIKES   -->
          <div class="metrics-item" *ngIf="summary.totalLikes !== null">
            <div class="metrics-content">
              <div class="metrics-main">
                <div class="metrics-icon">
                  <i class="fa-solid fa-heart"></i>
                </div>
                <div class="metrics-value">
                  {{ summary.totalLikes | shortNumber }}
                </div>
              </div>
              <div class="metrics-label">Total Likes</div>
            </div>
          </div>

          <!-- TOTAL COMMENTS -->
          <div class="metrics-item" *ngIf="summary.totalComments !== null">
            <div class="metrics-content">
              <div class="metrics-main">
                <div class="metrics-icon">
                  <i class="fa-solid fa-comment"></i>
                </div>
                <div class="metrics-value">
                  {{ summary.totalComments | shortNumber }}
                </div>
              </div>
              <div class="metrics-label">Total Comments</div>
            </div>
          </div>

          <!-- TOTAL SHARES -->
          <div class="metrics-item" *ngIf="summary.totalShares !== null">
            <div class="metrics-content">
              <div class="metrics-main">
                <div class="metrics-icon">
                  <i class="fa-solid fa-share"></i>
                </div>
                <div class="metrics-value">
                  {{ summary.totalShares | shortNumber }}
                </div>
              </div>
              <div class="metrics-label">Total Shares</div>
            </div>
          </div>

          <!-- TOTAL SAVES -->
          <div class="metrics-item" *ngIf="summary.totalSaves !== null">
            <div class="metrics-content">
              <div class="metrics-main">
                <div class="metrics-icon">
                  <i class="fa-solid fa-bookmark"></i>
                </div>
                <div class="metrics-value">
                  {{ summary.totalSaves | shortNumber }}
                </div>
              </div>
              <div class="metrics-label">Total Saves</div>
            </div>
          </div>
        </div>
      </p-card>
    </section>

    <!-- CHARTS SECTION -->
    <section class="charts-section">
      <!-- Multi-Series Line Chart -->
      <div class="chart-wrapper" *ngIf="multiSeriesLineData">
        <p-card>
          <p-chart
            type="line"
            [data]="multiSeriesLineData"
            [options]="lineChartOptions"
          ></p-chart>
        </p-card>
      </div>

      <!-- Stacked Bar Chart -->
      <div class="chart-wrapper" *ngIf="stackedBarData">
        <p-card>
          <p-chart
            type="bar"
            [data]="stackedBarData"
            [options]="stackedBarChartOptions"
          >
          </p-chart>
        </p-card>
      </div>

      <!-- Radar Chart -->
      <div class="chart-wrapper" *ngIf="radarChartData">
        <p-card header="Radar Chart (Brand Interactions)">
          <p-chart
            type="radar"
            [data]="radarChartData"
            [options]="radarChartOptions"
          >
          </p-chart>
        </p-card>
      </div>

      <!-- Polar Area Chart -->
      <div class="chart-wrapper" *ngIf="polarAreaData">
        <p-card header="Polar Area Chart (Platform Distribution)">
          <p-chart
            type="polarArea"
            [data]="polarAreaData"
            [options]="polarAreaChartOptions"
          >
          </p-chart>
        </p-card>
      </div>

      <!-- Bubble/Scatter Chart (Something Different) -->
      <div class="chart-wrapper" *ngIf="bubbleChartData">
        <p-card header="Bubble Chart (Performance)">
          <p-chart
            type="bubble"
            [data]="bubbleChartData"
            [options]="bubbleChartOptions"
          >
          </p-chart>
        </p-card>
      </div>
    </section>
  </main>
</div>
